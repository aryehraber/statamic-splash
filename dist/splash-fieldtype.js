var Ae={exports:{}};(function(o){(function(e,s){var c=s(e,e.document,Date);e.lazySizes=c,o.exports&&(o.exports=c)})(typeof window<"u"?window:{},function(s,c,m){var y,i;if(function(){var r,a={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};i=s.lazySizesConfig||s.lazysizesConfig||{};for(r in a)r in i||(i[r]=a[r])}(),!c||!c.getElementsByClassName)return{init:function(){},cfg:i,noSupport:!0};var P=c.documentElement,C=s.HTMLPictureElement,S="addEventListener",x="getAttribute",M=s[S].bind(s),g=s.setTimeout,K=s.requestAnimationFrame||g,W=s.requestIdleCallback,ne=/^picture$/i,ge=["load","error","lazyincluded","_lazyloaded"],J={},pe=Array.prototype.forEach,H=function(r,a){return J[a]||(J[a]=new RegExp("(\\s|^)"+a+"(\\s|$)")),J[a].test(r[x]("class")||"")&&J[a]},Q=function(r,a){H(r,a)||r.setAttribute("class",(r[x]("class")||"").trim()+" "+a)},se=function(r,a){var l;(l=H(r,a))&&r.setAttribute("class",(r[x]("class")||"").replace(l," "))},ae=function(r,a,l){var p=l?S:"removeEventListener";l&&ae(r,a),ge.forEach(function(v){r[p](v,a)})},O=function(r,a,l,p,v){var u=c.createEvent("Event");return l||(l={}),l.instance=y,u.initEvent(a,!p,!v),u.detail=l,r.dispatchEvent(u),u},ie=function(r,a){var l;!C&&(l=s.picturefill||i.pf)?(a&&a.src&&!r[x]("srcset")&&r.setAttribute("srcset",a.src),l({reevaluate:!0,elements:[r]})):a&&a.src&&(r.src=a.src)},V=function(r,a){return(getComputedStyle(r,null)||{})[a]},le=function(r,a,l){for(l=l||r.offsetWidth;l<i.minSize&&a&&!r._lazysizesWidth;)l=a.offsetWidth,a=a.parentNode;return l},D=function(){var r,a,l=[],p=[],v=l,u=function(){var d=v;for(v=l.length?p:l,r=!0,a=!1;d.length;)d.shift()();r=!1},z=function(d,h){r&&!h?d.apply(this,arguments):(v.push(d),a||(a=!0,(c.hidden?g:K)(u)))};return z._lsFlush=u,z}(),Y=function(r,a){return a?function(){D(r)}:function(){var l=this,p=arguments;D(function(){r.apply(l,p)})}},_e=function(r){var a,l=0,p=i.throttleDelay,v=i.ricTimeout,u=function(){a=!1,l=m.now(),r()},z=W&&v>49?function(){W(u,{timeout:v}),v!==i.ricTimeout&&(v=i.ricTimeout)}:Y(function(){g(u)},!0);return function(d){var h;(d=d===!0)&&(v=33),!a&&(a=!0,h=p-(m.now()-l),h<0&&(h=0),d||h<9?z():g(z,h))}},oe=function(r){var a,l,p=99,v=function(){a=null,r()},u=function(){var z=m.now()-l;z<p?g(u,p-z):(W||v)(v)};return function(){l=m.now(),a||(a=g(u,p))}},ce=function(){var r,a,l,p,v,u,z,d,h,E,T,R,ze=/^img$/i,be=/^iframe$/i,ye="onscroll"in s&&!/(gle|ing)bot/.test(navigator.userAgent),Ce=0,G=0,I=0,j=-1,ue=function(t){I--,(!t||I<0||!t.target)&&(I=0)},de=function(t){return R==null&&(R=V(c.body,"visibility")=="hidden"),R||!(V(t.parentNode,"visibility")=="hidden"&&V(t,"visibility")=="hidden")},xe=function(t,n){var f,b=t,w=de(t);for(d-=n,T+=n,h-=n,E+=n;w&&(b=b.offsetParent)&&b!=c.body&&b!=P;)w=(V(b,"opacity")||1)>0,w&&V(b,"overflow")!="visible"&&(f=b.getBoundingClientRect(),w=E>f.left&&h<f.right&&T>f.top-1&&d<f.bottom+1);return w},fe=function(){var t,n,f,b,w,$,k,B,F,N,U,q,A=y.elements;if((p=i.loadMode)&&I<8&&(t=A.length)){for(n=0,j++;n<t;n++)if(!(!A[n]||A[n]._lazyRace)){if(!ye||y.prematureUnveil&&y.prematureUnveil(A[n])){X(A[n]);continue}if((!(B=A[n][x]("data-expand"))||!($=B*1))&&($=G),N||(N=!i.expand||i.expand<1?P.clientHeight>500&&P.clientWidth>500?500:370:i.expand,y._defEx=N,U=N*i.expFactor,q=i.hFac,R=null,G<U&&I<1&&j>2&&p>2&&!c.hidden?(G=U,j=0):p>1&&j>1&&I<6?G=N:G=Ce),F!==$&&(u=innerWidth+$*q,z=innerHeight+$,k=$*-1,F=$),f=A[n].getBoundingClientRect(),(T=f.bottom)>=k&&(d=f.top)<=z&&(E=f.right)>=k*q&&(h=f.left)<=u&&(T||E||h||d)&&(i.loadHidden||de(A[n]))&&(a&&I<3&&!B&&(p<3||j<4)||xe(A[n],$))){if(X(A[n]),w=!0,I>9)break}else!w&&a&&!b&&I<4&&j<4&&p>2&&(r[0]||i.preloadAfterLoad)&&(r[0]||!B&&(T||E||h||d||A[n][x](i.sizesAttr)!="auto"))&&(b=r[0]||A[n])}b&&!w&&X(b)}},L=_e(fe),he=function(t){var n=t.target;if(n._lazyCache){delete n._lazyCache;return}ue(t),Q(n,i.loadedClass),se(n,i.loadingClass),ae(n,ve),O(n,"lazyloaded")},we=Y(he),ve=function(t){we({target:t.target})},Se=function(t,n){var f=t.getAttribute("data-load-mode")||i.iframeLoadMode;f==0?t.contentWindow.location.replace(n):f==1&&(t.src=n)},$e=function(t){var n,f=t[x](i.srcsetAttr);(n=i.customMedia[t[x]("data-media")||t[x]("media")])&&t.setAttribute("media",n),f&&t.setAttribute("srcset",f)},Ee=Y(function(t,n,f,b,w){var $,k,B,F,N,U;(N=O(t,"lazybeforeunveil",n)).defaultPrevented||(b&&(f?Q(t,i.autosizesClass):t.setAttribute("sizes",b)),k=t[x](i.srcsetAttr),$=t[x](i.srcAttr),w&&(B=t.parentNode,F=B&&ne.test(B.nodeName||"")),U=n.firesLoad||"src"in t&&(k||$||F),N={target:t},Q(t,i.loadingClass),U&&(clearTimeout(l),l=g(ue,2500),ae(t,ve,!0)),F&&pe.call(B.getElementsByTagName("source"),$e),k?t.setAttribute("srcset",k):$&&!F&&(be.test(t.nodeName)?Se(t,$):t.src=$),w&&(k||F)&&ie(t,{src:$})),t._lazyRace&&delete t._lazyRace,se(t,i.lazyClass),D(function(){var q=t.complete&&t.naturalWidth>1;(!U||q)&&(q&&Q(t,i.fastLoadedClass),he(N),t._lazyCache=!0,g(function(){"_lazyCache"in t&&delete t._lazyCache},9)),t.loading=="lazy"&&I--},!0)}),X=function(t){if(!t._lazyRace){var n,f=ze.test(t.nodeName),b=f&&(t[x](i.sizesAttr)||t[x]("sizes")),w=b=="auto";(w||!a)&&f&&(t[x]("src")||t.srcset)&&!t.complete&&!H(t,i.errorClass)&&H(t,i.lazyClass)||(n=O(t,"lazyunveilread").detail,w&&re.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,I++,Ee(t,n,w,b,f))}},Le=oe(function(){i.loadMode=3,L()}),me=function(){i.loadMode==3&&(i.loadMode=2),Le()},ee=function(){if(!a){if(m.now()-v<999){g(ee,999);return}a=!0,i.loadMode=3,L(),M("scroll",me,!0)}};return{_:function(){v=m.now(),y.elements=c.getElementsByClassName(i.lazyClass),r=c.getElementsByClassName(i.lazyClass+" "+i.preloadClass),M("scroll",L,!0),M("resize",L,!0),M("pageshow",function(t){if(t.persisted){var n=c.querySelectorAll("."+i.loadingClass);n.length&&n.forEach&&K(function(){n.forEach(function(f){f.complete&&X(f)})})}}),s.MutationObserver?new MutationObserver(L).observe(P,{childList:!0,subtree:!0,attributes:!0}):(P[S]("DOMNodeInserted",L,!0),P[S]("DOMAttrModified",L,!0),setInterval(L,999)),M("hashchange",L,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(t){c[S](t,L,!0)}),/d$|^c/.test(c.readyState)?ee():(M("load",ee),c[S]("DOMContentLoaded",L),g(ee,2e4)),y.elements.length?(fe(),D._lsFlush()):L()},checkElems:L,unveil:X,_aLSL:me}}(),re=function(){var r,a=Y(function(u,z,d,h){var E,T,R;if(u._lazysizesWidth=h,h+="px",u.setAttribute("sizes",h),ne.test(z.nodeName||""))for(E=z.getElementsByTagName("source"),T=0,R=E.length;T<R;T++)E[T].setAttribute("sizes",h);d.detail.dataAttr||ie(u,d.detail)}),l=function(u,z,d){var h,E=u.parentNode;E&&(d=le(u,E,d),h=O(u,"lazybeforesizes",{width:d,dataAttr:!!z}),h.defaultPrevented||(d=h.detail.width,d&&d!==u._lazysizesWidth&&a(u,E,h,d)))},p=function(){var u,z=r.length;if(z)for(u=0;u<z;u++)l(r[u])},v=oe(p);return{_:function(){r=c.getElementsByClassName(i.autosizesClass),M("resize",v)},checkElems:v,updateElem:l}}(),Z=function(){!Z.i&&c.getElementsByClassName&&(Z.i=!0,re._(),ce._())};return g(function(){i.init&&Z()}),y={cfg:i,autoSizer:re,loader:ce,init:Z,uP:ie,aC:Q,rC:se,hC:H,fire:O,gW:le,rAF:D},y})})(Ae);function te(o,e,s,c,m,y,i,P){var C=typeof o=="function"?o.options:o;e&&(C.render=e,C.staticRenderFns=s,C._compiled=!0),c&&(C.functional=!0),y&&(C._scopeId="data-v-"+y);var S;if(i?(S=function(g){g=g||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!g&&typeof __VUE_SSR_CONTEXT__<"u"&&(g=__VUE_SSR_CONTEXT__),m&&m.call(this,g),g&&g._registeredComponents&&g._registeredComponents.add(i)},C._ssrRegister=S):m&&(S=P?function(){m.call(this,(C.functional?this.parent:this).$root.$options.shadowRoot)}:m),S)if(C.functional){C._injectStyles=S;var x=C.render;C.render=function(K,W){return S.call(W),x(K,W)}}else{var M=C.beforeCreate;C.beforeCreate=M?[].concat(M,S):[S]}return{exports:o,options:C}}const Ie={props:["image","sizes"],computed:{thumbUrl(){return[100,200,300,400,500,600,700,800,900,1e3,1100,1200].map(e=>`${this.image.urls.raw}&q=60&auto=format&w=${e} ${e}w`).join(", ")}}};var Me=function(){var e=this,s=e._self._c;return s("div",{staticClass:"group"},[s("button",{staticClass:"relative w-full text-center",staticStyle:{"padding-top":"75%",cursor:"zoom-in"},attrs:{title:e.image.description},on:{click:function(c){return e.$emit("open")}}},[s("div",{staticClass:"absolute inset-0 flex items-center justify-center"},[s("div",{staticClass:"absolute inset-0 z-0 rounded opacity-50",style:{background:e.image.color}}),s("loading-graphic",{staticClass:"absolute inset-0 z-0 flex flex-col items-center justify-center text-center opacity-50",attrs:{text:""}}),s("img",{staticClass:"asset-thumbnail z-10 w-full h-full rounded lazyload",staticStyle:{"object-fit":"cover","object-position":"center"},attrs:{"data-srcset":e.thumbUrl,"data-sizes":e.sizes,alt:e.image.description}})],1)])])},Te=[],ke=te(Ie,Me,Te,!1,null,null,null,null);const Be=ke.exports,Ne={props:["value"]};var Pe=function(){var e=this,s=e._self._c;return e.value?s("div",{staticClass:"asset-solo-container asset-grid-listing"},[s("div",{staticClass:"asset-tile is-image",attrs:{title:e.value.description,tabindex:"0"}},[s("div",{staticClass:"asset-thumb-container"},[s("div",{staticClass:"asset-thumb"},[s("img",{attrs:{src:`${e.value.urls.raw}&crop=entropy&cs=tinysrgb&fit=max&q=80&w=400`,alt:e.value.description,title:e.value.description}}),s("div",{staticClass:"asset-controls"},[s("button",{staticClass:"btn btn-icon",attrs:{alt:e.__("Remove")},on:{click:function(c){return e.$emit("remove")}}},[s("svg-icon",{staticClass:"h-4 my-2",attrs:{name:"micro/sharp-trash"}})],1)])])]),s("div",{staticClass:"asset-meta"},[s("div",{staticClass:"asset-filename flex-1 px-2 py-1",attrs:{title:e.value.description},domProps:{textContent:e._s(e.value.description)}})])])]):s("div",{staticClass:"assets-fieldtype-picker"},[s("button",{staticClass:"btn",attrs:{type:"button",tabindex:"0"},on:{click:function(c){return e.$emit("open")}}},[e._v(" Browse Unsplash ")])])},Fe=[],Re=te(Ne,Pe,Fe,!1,null,null,null,null);const Ue=Re.exports,We={props:["image","thumbSizes"],computed:{thumbUrl(){return[100,200,300,400,500,600,700,800,900,1e3,1100,1200].map(e=>`${this.image.urls.raw}&q=60&auto=format&w=${e} ${e}w`).join(", ")},imageUrl(){return[100,200,300,400,500,600,700,800,900,1e3,1100,1200,1296,1400,1600,1800,2e3,2200,2400].map(e=>`${this.image.urls.raw}&q=60&auto=format&w=${e} ${e}w`).join(", ")}}};var je=function(){var e=this,s=e._self._c;return s("div",{staticClass:"absolute inset-0 z-20 bg-white p-2"},[s("div",{staticClass:"relative w-full h-full bg-white",staticStyle:{cursor:"zoom-out"},on:{click:function(c){return e.$emit("close")}}},[s("img",{staticClass:"absolute z-10 w-full h-full lazyload",staticStyle:{"object-fit":"contain"},attrs:{"data-srcset":e.imageUrl,"data-sizes":"(min-width: 1000px) 60vw, (min-width: 1200px) 70vw, (min-width: 1400px) 80vw, 100vw",alt:e.image.description}}),s("img",{staticClass:"absolute z-0 w-full h-full",staticStyle:{"object-fit":"contain"},attrs:{srcset:e.thumbUrl,sizes:e.thumbSizes,alt:e.image.description}}),s("loading-graphic",{staticClass:"absolute inset-0 z-5 flex flex-col items-center justify-center text-center",attrs:{text:""}})],1)])},qe=[],He=te(We,je,qe,!1,null,null,null,null);const Qe=He.exports;const Oe={mixins:[Fieldtype],components:{Thumb:Be,InputField:Ue,ImageViewer:Qe},data(){return{loading:!1,error:null,showBrowser:!1,searchQuery:"",searchPage:1,images:[],hasNextPage:null,selectedImage:null,selectedThumbSize:"small"}},computed:{filteredImages(){const o=[];return this.images.filter(({id:e})=>{if(o.indexOf(e)===-1)return o.push(e),!0})},canLoadMore(){if(!(this.searchPage===1&&this.loading))return this.searchQuery?this.images.length&&this.hasNextPage:!0},thumbGrid(){return{small:"splash-grid-cols-2 sm:splash-grid-cols-3 md:splash-grid-cols-4 lg:splash-grid-cols-5 xl:splash-grid-cols-6",large:"splash-grid-cols-2 sm:splash-grid-cols-3"}[this.selectedThumbSize]},thumbSizes(){return{small:"(max-width: 575px) 50vw, (max-width: 768px) 25vw, (min-width: 1000px) 15vw",large:"(max-width: 575px) 50vw, (max-width: 768px) 33vw, (min-width: 1000px) 25vw"}[this.selectedThumbSize]}},methods:{search(o=!1){if(this.loading)return;this.loading=!0,this.error=null,o&&this.searchPage++;const e="https://api.unsplash.com",s=this.searchQuery?"/search/photos":"/photos",c={client_id:this.meta.access_key,query:this.searchQuery,page:this.searchPage,per_page:30};this.$axios.get(`${e}${s}`,{params:c}).then(({data:m})=>{const y=m.results||m;this.images=o?this.images.concat(y):y,this.hasNextPage=m.total_pages?m.total_pages>this.searchPage:null,this.loading=!1}).catch(m=>{if(m.response){const{data:y,status:i}=m.response;this.error={data:y,status:i}}})},loadMore(){this.search(!0)},openBrowser(){this.showBrowser=!0,this.search()},closeBrowser(){this.showBrowser=!1,this.images=[],this.searchQuery="",this.searchPage=1,this.hasNextPage=null,this.selectedImage=null},openImage(o){this.selectedImage=o},closeImage(){this.selectedImage=null},select(){this.$emit("input",this.selectedImage),this.pingUnsplash(),this.closeBrowser()},removeImage(){this.selectedImage=null,this.$emit("input",null)},setDefaultThumbSize(){this.config.thumb_size!==void 0?this.selectedThumbSize=this.config.thumb_size:this.meta.default_thumb_size!==void 0&&(this.selectedThumbSize=this.meta.default_thumb_size)},initInfiniteScroll(){const o=this.$refs.imageContainer;o&&o.addEventListener("scroll",_.throttle(()=>{if(this.loading)return;const e=300;this.$refs.loadMoreButton&&o.scrollTop+o.clientHeight>=o.scrollHeight-e&&this.loadMore()},250))},pingUnsplash(){if(!this.selectedImage)return;const o={client_id:this.meta.access_key};this.$axios.get(this.selectedImage.links.download_location,{params:o})}},watch:{showBrowser(o){o&&setTimeout(this.initInfiniteScroll,100)},searchQuery(){this.images=[],this.searchPage=1,this.hasNextPage=null,this.selectedImage=null,this.search()}},created(){this.setDefaultThumbSize()}};var Ve=function(){var e=this,s=e._self._c;return e.meta.access_key?s("div",[s("input-field",{attrs:{value:e.value},on:{open:e.openBrowser,remove:e.removeImage}}),e.showBrowser?s("stack",{attrs:{name:"unsplash-browser"},on:{closed:e.closeBrowser}},[s("div",{staticClass:"flex flex-col h-full bg-white"},[s("div",{staticClass:"relative flex flex-col h-full"},[e.selectedImage?s("image-viewer",{attrs:{image:e.selectedImage,"thumb-sizes":e.thumbSizes},on:{close:e.closeImage}}):e._e(),s("div",{staticClass:"flex items-center justify-between w-full p-2 bg-white"},[s("data-list-search",{attrs:{placeholder:"Search Unsplash..."},model:{value:e.searchQuery,callback:function(c){e.searchQuery=c},expression:"searchQuery"}}),s("div",{staticClass:"hidden md:flex ml-1"},[s("button",{staticClass:"btn btn-sm",on:{click:function(c){e.selectedThumbSize=e.selectedThumbSize==="large"?"small":"large"}}},[s("svg-icon",{staticClass:"h-4 w-4",attrs:{name:e.selectedThumbSize==="large"?"shrink-all":"expand"}})],1)])],1),s("div",{ref:"imageContainer",staticClass:"relative z-10 flex-1 w-full h-full",class:{"overflow-y-scroll":!e.selectedImage}},[s("div",{staticClass:"absolute inset-0 p-2"},[s("div",{staticClass:"asset-grid-listing",class:e.thumbGrid},e._l(e.filteredImages,function(c){return s("thumb",{key:c.id,attrs:{image:c,sizes:e.thumbSizes},on:{open:function(m){return e.openImage(c)}}})}),1),e.canLoadMore?s("div",{staticClass:"z-20 p-2 pb-4 text-center"},[s("button",{ref:"loadMoreButton",staticClass:"btn",attrs:{disabled:e.loading},domProps:{textContent:e._s(e.loading?"Loading...":"Load More")},on:{click:e.loadMore}})]):e._e(),e.error?s("div",{staticClass:"pb-5 font-medium text-center text-red",domProps:{textContent:e._s(`Unsplash Error: ${e.error.data} (${e.error.status})`)}}):e._e()])])],1),s("div",{staticClass:"flex items-center justify-end z-20 p-2 bg-gray-200 border-t"},[s("button",{staticClass:"btn",on:{click:e.closeBrowser}},[e._v(" Cancel ")]),s("button",{staticClass:"btn-primary ml-1",attrs:{disabled:!e.selectedImage},on:{click:e.select}},[e._v(" Select ")])])])]):e._e()],1):s("div",{staticClass:"text-sm"},[s("code",[e._v("Missing Unsplash API Access Key")])])},De=[],Ge=te(Oe,Ve,De,!1,null,null,null,null);const Xe=Ge.exports;Statamic.$components.register("splash-fieldtype",Xe);
